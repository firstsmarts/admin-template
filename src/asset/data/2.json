{
    "title": "移动应用权限检查评估",
    "type": 2,
    "kvm": "pack17",
    "content": "<p>应用权限分析</p><p>本课时将会结合应用示例，讲解对应用权限申请的合理性进行分析。</p><h3>案例一：</h3><p>应用名称：招商银行</p><p>分类：金融理财</p><p>案例操作：</p><p>1、在右边的操作区开启虚拟机后，看到如下虚拟机桌面，此时点击“APK权限检测工具”打开检测工具。</p><p><img src='https://wiki.avlyun.org/download/attachments/55056159/image2018-1-4_13-50-28.png?version=1&modificationDate=1515045028565&api=v2'></p><p>2、打开工具后，将桌面“案例”文件夹中的“案例一.apk”拖至权限检测工具窗口，加载完毕后点击文件信息查看工具右下角的“展开》》》”按钮以获取全部权限信息。</p><p><img src='https://wiki.avlyun.org/download/attachments/55056159/image2018-1-4_14-2-5.png?version=1&amp;modificationDate=1515045725755&amp;api=v2'></p><p>3、通过应用的基本信息区，可以看到此应用为招商银行的应用，通过其包名可以看出该应用确实为招商银行官方应用。</p><p>4、此时，可进一步地，搜索该应用在各个应用商店中的介绍，其中我们通过某应用商店可以发现如下的介绍：</p><p><img src='https://wiki.avlyun.org/download/attachments/55056159/image2018-1-4_14-5-51.png?version=1&amp;modificationDate=1515045951521&amp;api=v2'></p><p>从其描述中可以看到此应用涉及功能包括个人银行卡整理、收支记录及部分识别和搜索功能。</p><p>5、这时转向工具的权限检测区，可以发现该应用申请了获取联系人信息，读取短信内容，获取通话记录，获取网络状态，获取网络状态和连接网络等权限。其具体的权限申请表格如下：</p><p><img src='https://wiki.avlyun.org/download/attachments/55056159/image2017-12-28_13-38-12.png?version=1&amp;modificationDate=1515046484228&amp;api=v2'></p><p>6、这时可以打开桌面中的“APK静态分析工具”，在AndroidManifest.xml文件视图中，可以看到该如下的代码部分：</p><p><img src='https://wiki.avlyun.org/download/attachments/55056159/image2018-1-4_14-41-3.png?version=1&amp;modificationDate=1515048063738&amp;api=v2'></p><p>其中可以看到，其中以uses-permission开头的标签即是用于申请权限用途的。其中用户可以将其中标签内的内容与权限检查工具中的内容相对应。同时，如课时一中提到的，AM文件负责了声明应用运行过程中所需要的所有权限，大家也可以从APK静态分析工具提供的AM视图中，具体了解到其中Manifest文件声明权限的形式。</p><p>7、回到该应用具体的权限申请：</p><ul><li>因为该应用需要联网使用，所以对应的网络申请是可以被视为合理的</li><li>因为在银行应用中需要获取附近站点，所以获取位置信息的权限被视为合理</li><li>因为存在语音搜索、面部识别与扫码等功能，所以使用录音、闪光灯和拍照等权限可以被视为合理</li></ul><p>除以上通过银行应用界面可以看出的权限申请外，该应用同时申请了获取联系人、读取短信、拨打电话、写入外部数据、下载时不弹出提示等等较为敏感的权限，这些权限与应用本身业务没有直接的关联，我们可以初步视为非必要的权限申请。</p><p>因为是官方应用，我们有理由相信招商银行APP申请对应权限是为了譬如监控是否存在仿冒短信等安全用途，但是这些权限的敏感度较高，如果是非官方或者不来路的应用也进行了同样的申请，则需要十分小心。</p><h3>案例二：</h3><p>应用名称：招商银行</p><p>分类：金融理财</p><p>案例操作：</p><p>1、在权限检测工具中加载“案例二.apk”，可以在基本信息处看到看到同样地也是招商银行的应用。</p><p><img src='https://wiki.avlyun.org/download/attachments/55056159/image2017-12-28_13-47-14.png?version=1&amp;modificationDate=1515049867755&amp;api=v2'></p><p>2、但是案例二签名信息与案例一有所不同，让人产生怀疑。转至权限部分，可以看到案例二申请的权限相比案例一要少了很多，仅仅有10条权限：</p><p><img src='https://wiki.avlyun.org/download/attachments/55056159/image2017-12-28_13-51-35.png?version=1&amp;modificationDate=1515049960389&amp;api=v2'></p><p>3、同样地，用APK静态分析工具打开案例二.apk，可以发现在AM文件中，确实仅仅只申请了以上的几条权限，相比案例一要少了很多。</p><p><img width='550' src='https://wiki.avlyun.org/download/attachments/55056159/image2018-1-4_15-14-32.png?version=1&amp;modificationDate=1515050072368&amp;api=v2'></p><p>4、乍看之下，少了很多权限申请，其中不乏敏感度较高的权限申请，如获取精确位置等，是否可以初步认为这个招商银行的应用相较之前的，更加安全呢？</p><p>但是，从另外一个方面考虑，在第一课时中提到，如果Android应用需要使用相关的权限，必须首先在AM文件中做出对应的声明。反观这个应用，仅仅申请了短信以及联系人信息等等权限，在上个案例中提到的人脸识别、用户定位等等功能通过列表中的申请内容均无法保证实现，那么，我们也有理由怀疑这个应用的具体功能。</p><p>5、其实，这一个案例应用是招商银行的仿冒件，为恶意软件。通过分析，对其的描述为： “<strong>会请求激活设备管理器，隐藏图标，获取用户设备固件信息和短信信息发送到指定号码、联网上传和发送到指定邮箱，监听短信拦截短信获取短信信息转发到指定号码、联网上传和发送到指定邮箱。</strong>”</p><p>其中可以看出，这个应用所申请的每一项权限，均与其恶意攻击的手段相对应，譬如：接受信息和读取联系人是为了获得用户的敏感信息，申请发送短信和访问网络，是为了将应用的信息上传。</p><p>6、那么，我们可以认为，这个应用所申请的所有权限，均为不合理。因为其本身就是恶意软件，所有的权限申请均是为了实现其攻击目的。</p><h3><strong>小结：</strong></h3><ul><li>通过AM文件，可以获取到应用对Android各权限的申请情况，具体地，权限会在uses-permission的标签中进行输出。</li><li>应用的权限申请与其功能业务紧密相连，对合理性地判断，也需要结合应用本身的描述。</li><li>部分应用会申请一些敏感度较高的权限，此时，需要保持警惕，因为一旦获取了权限，可能带来对用户的影响也会更大。</li><li>如果申请的权限与业务不符合，或者是不能全部满足应用业务需要的，有理由怀疑应用的正规性。</li><li>如果是恶意应用，那么其所有的权限申请，均可以认为是恶意的。</li></ul>"
}